---
title: "OpenRTB v3.0e"
description: "リアルタイム入札（RTB）インターフェースの標準。"
---
March 2022

**About the IAB Technology Lab (IAB Technology Lab について)**

IAB Technology Laboratory は、非営利の研究開発コンソーシアムであり、企業が世界的な業界技術標準とソリューションを実装するのを支援し、作成することを任務としています。Tech Lab の目標は、デジタル広告およびマーケティングのサプライチェーンに関連する摩擦を減らしながら、業界の安全な成長に貢献することです。
IAB Tech Lab は、技術標準の開発を主導し、IAB 標準の迅速かつ費用対効果の高い実装を支援するコードライブラリを作成および保守し、企業が自社の技術ソリューションと IAB 標準との互換性を評価するためのテストプラットフォームを確立します。これらは 18 年間にわたり、デジタル広告サプライチェーンにおける相互運用性と収益性の高い成長の基盤となってきました。

IAB Tech Lab の詳細については、[www.iabtechlab.com](https://www.iabtechlab.com) をご覧ください。

**License (ライセンス)**

OpenRTB Specification the IAB Tech Lab is licensed under a Creative Commons Attribution 3.0 License. To view a copy of this license, visit [creativecommons.org/licenses/by/3.0/](http://creativecommons.org/licenses/by/3.0/) or write to Creative Commons, 171 Second Street, Suite 300, San Francisco, CA 94105, USA.

![CC by 3.0](https://i.creativecommons.org/l/by/3.0/88x31.png)

# OVERVIEW (概要) <a name="overview"></a>

## OpenMedia Mission (OpenMedia のミッション) <a name="openmediamission"></a>

OpenMedia プロジェクトのミッションは、広告のバイヤー (buyers) とパブリッシャーインベントリのセラー (sellers) 間の通信のためのオープンな業界標準を提供することにより、プログラマティックなマーケットプレイスでの成長を促進することです。これらの標準には、実際のリアルタイムビディング（RTB）プロトコル、情報分類体系 (taxonomies)、オフライン設定の同期など、これらに限定されないいくつかの側面があります。

## OpenRTB Executive Summary (OpenRTB エグゼクティブサマリー) <a name="execsummary"></a>

このドキュメントは、リアルタイムビディング (RTB) インターフェースの標準を指定します。このプロトコル標準は、パブリッシャーインベントリのサプライヤー（つまり、エクスチェンジ、パブリッシャーと連携するネットワーク、および SSP）と、そのインベントリの競争力のあるバイヤー（つまり、ビッダー、DSP、または広告主と連携するネットワーク）との間の接続を簡素化することを目的としています。

OpenRTB の全体的な目標は、バイヤーとセラーの間で通信するための *lingua franca* (共通語) を作成することであり、これまでもそうでした。各当事者がどのようにビジネスを行うかを正確に規制することは意図していません。プロジェクトとして、私たちはエコシステム内の当事者間のインテグレーションを容易にし、パイプ (通信経路) よりも深いレベルでイノベーションが起こるようにすることを目指しています。

## History of OpenRTB (OpenRTB の歴史) <a name="historyofopenrtb"></a>

OpenRTB は、2010 年 11 月に 3 つのデマンドサイドプラットフォーム (dataxu、MediaMath、および Turn) と 3 つのセルサイドプラットフォーム (Admeld、PubMatic、および The Rubicon Project) の間のパイロットプロジェクトとして立ち上げられました。最初の目標は、ブロックリストを交換するために当事者間の通信を標準化することでした。OpenRTB ブロックリスト仕様のバージョン v1.0 は、2010 年 12 月にリリースされました。

業界からの肯定的な反応を受けて、Nexage は OpenRTB プロジェクトにアプローチし、実際のリアルタイムビッドリクエスト/レスポンスプロトコルに焦点を当て、特にモバイル広告をサポートする OpenRTB の API 仕様を作成することを提案しました。モバイル小委員会は、バイサイドを代表する企業 (dataxu、Fiksu、および [X+1]) とセルサイドを代表する企業 (Nexage、Pubmatic、Smaato、および Jumptap) の間で結成されました。このプロジェクトの結果、2011 年 2 月に OpenRTB v1.0 Mobile 仕様がリリースされました。

モバイル仕様のリリースに続いて、ビデオ広告エクスチェンジ (BrightRoll および Adap.tv) が dataxu および ContextWeb と協力してビデオのサポートを組み込むビデオ小委員会が結成されました。目標は、ディスプレイ、ビデオ、およびモバイルのサポートを 1 つのドキュメントに組み込むことでした。この取り組みの結果、2011 年 6 月に統一標準として OpenRTB v2.0 がリリースされました。

業界での非常に広範な採用により、OpenRTB はバージョン v2.1 のリリースとともに、2012 年 1 月に IAB 標準として確立されました。仕様の技術的内容に関するガバナンスは、OpenRTB コミュニティとそのガバナンスルールのままでした。

それ以来、プログラマティック広告は業界の支配的な力となりました。しかし、これはまた、不正率 (fraud rates) やその他のリスクを増加させる可能性のある、ますます複雑なサプライチェーンにもつながっています。これが、OpenRTB v3.0 を推進する主要な動機の 1 つです。

# REGULATORY GUIDANCE (規制に関するガイダンス) <a name="guidance"></a>

OpenRTB の実装では、すべてのトランザクションにおいて、適用されるすべての地域の法令への準拠を保証する必要があります。

# ARCHITECTURE (アーキテクチャ) <a name="architecture"></a>

このセクションでは、RTB トランザクションが適用されるエコシステムの基礎となるモデルと、仕様の詳細が適切なコンテキストを持つようにするための OpenRTB の全体的な構成について説明します。

## OpenRTB Principles (OpenRTB の原則) <a name="openrtb_principles"></a>

以下の点は、OpenRTB 仕様の基礎となる指針、基本的なルールのいくつか、およびその進化を定義しています。

* OpenRTB は生きた仕様です。新しいオブジェクトや属性が追加されたり、列挙リストが拡張されたりすることはいつでもあり得るため、実装者はバージョン番号内で破損することなくこれらの種類の変更を受け入れる必要があります。[Appendix D: Versioning Policy (付録 D: バージョニングポリシー)](#appendixd_versioning) を参照してください。
  * たとえば、「OpenRTB 3.0」実装を持つデマンドソースは、OpenRTB 3.0 の新しいリリースなどからの、予期しない新しいフィールドや列挙リストの値も許容しなければなりません。
  * 同様に、サプライソースは新しいフィールドや列挙リストの値（新しいリリースからのものなど）を自由に送信するべきであり (SHOULD)、予期しない新しいフィールドや列挙リストの値を持つビッドレスポンスを許容しなければなりません (MUST)。

* オブジェクトと属性の名前は、読みやすさとのバランスを取りつつ、意図的にコンパクトにされています。その理由は、これらの名前が平文で非常に頻繁に送信される可能性があるためです。

* OpenRTB は、オブジェクトに対して特定の表現を強制しません。JSON がデフォルトの表現ですが、他の表現も使用できます。以下の [Representation (表現)](#representation) を参照してください。

* すべての OpenRTB オブジェクトは、ベンダー固有のアプリケーションのために必要に応じて拡張できます。OpenRTB オブジェクトの拡張フィールドは、常に従属する「ext」オブジェクト内に配置しなければなりません。ほとんどの列挙リストは、示されている場合、通常 500 から始まるベンダー固有のコードを含めるように拡張することもできます。

## Terminology (用語) <a name="terminology"></a>

以下の用語は、本ドキュメント全体を通して、特に OpenRTB および本仕様の文脈で使用されます。

| Term | Definition |
| --- | --- |
| RTB | リアルタイムまたはリアルタイムに近い形での個々のアイテムの入札。 |
| Supply Source | インベントリを販売するパブリッシャーまたはその他のオーディエンスソース。 |
| Exchange | アイテムごとにビッダー間のオークションを実施するエンティティ（例：SSP）。 |
| Intermediary | サプライソースとデマンドソースの間の経路にあるエンティティ（例：エクスチェンジ）。 |
| Supply Chain | 最終的なサプライソースとデマンドソースの間にある 1 つ以上の仲介者 (Intermediary) のセット。 |
| Demand Source | オークションでアイテムに入札するエンティティ（例：DSP）。 |
| Seat | アイテムを取得し、その代理としてデマンドプラットフォームを使用することを希望する購入エンティティ（例：広告主、代理店）。通常は購入予算の所有者です。 |
| Deal | 特定の条件の下でアイテムを購入するための、セラーとバイヤー間の合意。 |


## Reference Model (リファレンスモデル) <a name="referencemodel"></a>

OpenRTB は一般に、エクスチェンジとそのデマンドソース間の相互作用、あるいは時にはオークショニア（競売人）とそのビッダー間の相互作用として考えられています。その焦点において、OpenRTB は、エクスチェンジからデマンドパートナーにビッドリクエストをブロードキャストし、それに応じてビッド（入札）を収集し、何らかのオークションルールに基づいて勝者を決定することによって、マイクロコモディティ（例：広告インプレッション）を販売する方法を定義しています。エクスチェンジは、ビッドが受け入れられたことをバイヤーに通知し、エクスチェンジのビジネスポリシー（例：レンダリングされたマークアップ）に基づいてビッドが請求可能 (billable) になると、エクスチェンジはクリアリングプライスなどの重要なデータとともに落札したバイヤーに通知します。他のバイヤーには、オークションに負けたことが通知される場合があります。

しかし、今日のエコシステムははるかに複雑です。ヘッダービディング (Header bidding) が非常に一般的になり、その結果、パブリッシャーまたはユーザーエージェントの場所またはその近くに新しい決定ポイントが生じ、エクスチェンジはもはや唯一の決定者ではなくなりました。また、複数のサプライチェーン仲介者が存在することも一般的になっています。おそらく、自身の直接統合されたデマンドに加えて、別のエクスチェンジをデマンドソースとして使用するメディエーターまたはエクスチェンジです。

これらの構造は、次のリファレンスモデル図に示されています。ここでは、エクスチェンジ自体がアップストリーム（左側）の仲介者に対して入札するデマンドソースとして機能したり、他のダウンストリーム（右側）のエクスチェンジや DSP をデマンドソースとして使用したりする場合があります。図は *N* 個のエクスチェンジまたはサプライ仲介者の一般的なケースを示していますが、実用的な考慮事項（例：レイテンシ、連続する収益シェアなど）により、自然な制限が課される傾向があることに注意してください。

![](images/Figure1.png)

OpenRTB のビッドリクエスト、ビッドレスポンス、およびイベントは、これらのエンティティの任意のペア間で実装できますが、ここでパブリッシャーから Exchange-1 として描かれているパブリッシャーのインテグレーションは、通常それほど標準化されていません。特定のエンティティは、より大きなサプライチェーンを認識している場合とそうでない場合がありますが、このチェーンはパブリッシャーによって異なる可能性があることを考慮してください。いずれにせよ、OpenRTB は、特定のエンティティが、少なくとも特定のトランザクションのコンテキスト内では、左側（サプライサイド、アップストリーム）および右側（デマンドサイド、ダウンストリーム）の直接実装された隣接者とのみビジネス関係を持つと想定しています。

このことの影響は、イベントの伝播 (propagation) とプライベートマーケットプレイスのディール (deals) で説明できます。このリファレンスモデルのエンティティの視点から一人称で話すと：

* 私が受け取るすべての Pending、Billing、または Loss イベントは、私のサプライサイドパートナー（つまり、私のすぐ左側のエンティティ）から、またはその完全な権限を持っていると想定します。

* 私は、Pending、Billing、および Loss イベントを、私のデマンドサイドパートナー（つまり、私のすぐ右側の直接統合されたエンティティ）にのみ送信する責任があります。

* 私は、私のサプライパートナーとデマンドパートナー（つまり、私のすぐ左側と右側のエンティティ）の間でディールを仲介し、実行します。他のどのエンティティも、OpenRTB の下で私のディールをチェーンのさらに上流または下流に拡張または伝播する義務はありません。

## Protocol Layers (プロトコルレイヤー) <a name="protocollayers"></a>

異なる仕様間でのオブジェクトの再利用を支援し、仕様のさまざまな側面が異なるペースで進化できるようにするために、OpenRTB v3.0 以降、階層化アプローチが採用されています。以下はこのモデルを示しています。非公式に表現すると、レイヤー 1 は当事者間でバイトを移動し、レイヤー 2 はこれらのバイトの言語を表現し、レイヤー 3 はこの言語を使用してトランザクションを指定し、レイヤー 4 は取引される商品を記述します。

![](images/Figure2.png)

この階層化の概念を踏まえ、IAB Tech Lab は関連する仕様の全体的な構成を「Open Media」として定義しました。これらの仕様のランドスケープと、それらがどのようにプロトコルレイヤーに整理されるかを以下に示します。

![](images/Figure3.png)

以下のサブセクションでは、OpenRTB 仕様に関連するこれらのレイヤーを指定します。明示的に別段の指定がある場合、オプションとして注釈が付けられている場合、またはベストプラクティスとして呼びかけられている場合を除き、これらのサブセクションのすべての重要な側面は OpenRTB コンプライアンスに必須 (required) です。

### Layer-1:  Transport (レイヤー 1: トランスポート) <a name="layer1_transport"></a>

#### Communications (通信) <a name="communications"></a>

エクスチェンジとそのデマンドソース間の基本プロトコルは HTTP です。具体的には、HTTP GET よりも大きなペイロードに対応し、バイナリ表現の使用を容易にするために、ビッドリクエストには HTTP POST が必須です。通知イベントは、エクスチェンジの裁量により POST または GET のいずれかになります。

コンテンツを返す呼び出し（例：ビッドレスポンス）は、HTTP コード 200 を返す必要があります (should)。有効なリクエストに対してコンテンツを返さない呼び出し（例：ノービッドを示す 1 つのオプションである空のビッドレスポンス、イベント通知）は、HTTP 204 を返す必要があります (should)。無効な呼び出し（例：不正な形式または破損したペイロードを含むビッドリクエスト）は、コンテンツなしで HTTP 400 を返す必要があります (should)。

#### Version Headers (バージョンヘッダー) <a name="versionheaders"></a>

OpenRTB バージョンは、カスタムヘッダーパラメーターを使用してビッドリクエストのヘッダーで渡されなければなりません (must)。これにより、ビッダーはリクエストの解析を試みる前に、含まれるメッセージのバージョンを認識できます。バージョニングの詳細については、[Appendix D: Versioning Policy (付録 D: バージョニングポリシー)](#appendixd_versioning) および [OpenRTB Principles (OpenRTB の原則)](#openrtb_principles) を参照してください。

`x-openrtb-version: 3.0`

さらに、必須ではありませんが推奨される (recommended) こととして、レスポンスには、レスポンダによって実装されたプロトコルバージョンを含む同じ形式の HTTP ヘッダーを含めます。ただし、応答はリクエストのバージョンと互換性があり、バージョンサポートについては当事者間で事前に議論されていると想定されます。

**BEST PRACTICE (ベストプラクティス):** 接続パフォーマンスを向上させる最も単純で効果的な方法の 1 つは、Keep-Alive とも呼ばれる HTTP Persistent Connections (持続的接続) を有効にすることです。これは、接続管理のオーバーヘッドとインターフェースの両側での CPU 使用率を削減することにより、全体的なパフォーマンスに大きな影響を与えます。

#### Transport Security (トランスポートセキュリティ) <a name="transportsecurity"></a>

OpenRTB v3.0 以降、コンプライアンスには HTTPS および Transport Layer Security (TLS) バージョン 1.2+ が必須であり、したがって OpenRTB プロトコルが動作するすべての接続は HTTPS でなければなりません (must)。暗号化されていない HTTP をまだ使用しているレガシーインテグレーションは、もはや準拠しているとは見なされません。


### Layer-2:  Format (レイヤー 2: フォーマット) <a name="layer2_format"></a>

#### *Representation (表現)* <a name="representation"></a>

JSON (JavaScript Object Notation) は、ビッドリクエストおよびビッドレスポンスのデータペイロードのデフォルト形式です。JSON は、人間にとっての読みやすさと相対的なコンパクトさの組み合わせのために選ばれました。

オプションとして、エクスチェンジはバイナリ表現（例：圧縮 JSON、ProtoBuf、Avro など）も提供できます。これらは、送信時間と帯域幅の点でより効率的になる可能性があります。IAB Tech Lab は、これらまたはその他の形式のリファレンス実装を提供する場合があります。利用可能な場合、インテグレーションのばらつきを減らすために、これらの IAB リファレンス実装の使用が強く推奨されます。

ビッドリクエストは、Content-Type HTTP ヘッダーを使用して表現を MIME タイプとして指定します。標準の JSON 表現の MIME タイプは、示されているように `application/json` です。ビッドレスポンスの形式は、ビッドリクエストと同じでなければなりません (must)。

`Content-Type: application/json`

代替のバイナリ表現が使用される場合、エクスチェンジまたは SSP は Content-Type を適切に指定する必要があります。例：`avro/binary` または `application/x-protobuf`。Content-Type が欠落している場合、エクスチェンジによって別のデフォルトが選択されていない限り、ビッダーはタイプが `application/json` であると想定する必要があります。

#### *Encoding (エンコーディング)* <a name="encoding"></a>

エクスチェンジとデマンドソース間で送信されるデータを圧縮することは、非常に有益です。圧縮により、転送されるデータのサイズが大幅に削減され、エクスチェンジとデマンドソースの両方のネットワーク帯域幅が節約されます。この節約を完全に実現するには、エクスチェンジによって送信されるビッドリクエストと、デマンドソースによって返されるビッドレスポンスの両方で圧縮を有効にする必要があります。

圧縮は、標準の HTTP 1.1 メカニズムを使用してビッドレスポンスで有効にできます。ほとんどの Web サーバーはすでにレスポンスコンテンツの gzip 圧縮をサポートしており、そのため理想的な選択肢です。レスポンスを圧縮したいことを通知するために、エクスチェンジは標準の HTTP 1.1 Accept-Encoding ヘッダーを設定する必要があります。使用されるエンコーディング値は `gzip` でなければなりません。

`Accept-Encoding: gzip`

このヘッダーは、エクスチェンジがレスポンスの gzip エンコーディングを受け入れる能力があることをデマンドソースに示します。デマンドソースサーバーがこれをサポートし、正しく構成されている場合、gzip エンコードされたコンテンツで自動的に応答します。これは、標準の HTTP 1.1 Content-Encoding ヘッダーを使用して示されます。

`Content-Encoding: gzip`

ビッドリクエストで圧縮を有効にするには、まずエクスチェンジとデマンドソースの間で、これがサポートされていることについて合意する必要があります。これは、エクスチェンジがビッドリクエストを送信する前にフォーマットとエンコーディングの両方を知っている必要があるため、カスタムデータフォーマットが使用される場合と同様です。デマンドソースがサポートしている場合、エクスチェンジは HTTP 1.1 Content-Encoding ヘッダーを設定することにより、gzip 圧縮されたビッドリクエストを送信していることを示す必要があります。使用されるエンコーディング値は `gzip` でなければなりません。

`Content-Encoding: gzip`

このヘッダーが設定されていない場合、リクエストコンテンツはエンコードされていないと想定されます。HTTP 1.1 では、Content-Encoding ヘッダーは通常、レスポンスコンテンツにのみ使用されます。ただし、リクエストコンテンツにもこのヘッダーを使用することで、使用されるデータ形式に関係なくリクエストが圧縮されていることを示すことができます。これは、バイナリデータ形式であっても圧縮の恩恵を受けることができるため便利です。

### Layer-3:  Transaction (レイヤー 3: トランザクション) <a name="layer3_transaction"></a>

トランザクションレイヤーは、OpenRTB を構成するリアルタイムビディングプロトコルの中心です。これは、エクスチェンジとそのビッダー、より一般的にはサプライチェーン仲介者とその統合されたデマンドソースとの間の商取引プロトコルを定義します。

詳細については、このドキュメントの「[SPECIFICATION (仕様)](#specification)」セクションを参照してください。

### Layer-4:  Domain (レイヤー 4: ドメイン) <a name="layer4_domain"></a>

ドメインレイヤーは、トランザクションレイヤーが操作するオブジェクト、つまり取引されるメディアエクスチェンジを定義します。典型的な広告オークションでは、ビッドリクエストには 2 か所にドメインオブジェクトが含まれます。第一に、全体的なリクエストには、サイトまたはアプリ、デバイス、ユーザーなど、販売のコンテキストを記述するドメインオブジェクトが含まれます。第二に、販売のために提供されている各アイテムには、アイテムの詳細（例：インプレッションとプレースメントの詳細）、仕様、および受け入れ可能なビッドに関連付けることができるメディアに対する制限を定義するドメインオブジェクトが含まれます。レスポンス内の各ビッドには、オークションに勝った場合にユーザーに配信されるメディアを定義するドメインオブジェクトが含まれます。

ドメインレイヤー仕様のバージョンはトランザクションレイヤーとは独立して変化する可能性があるため、トランザクションレイヤーのルートオブジェクトにはドメインの仕様とバージョン情報が含まれています。これは、異なるバージョンのサポートがエクスチェンジやデマンドソースによって時間の経過とともに変化するため、重要です。

OpenRTB の場合、[Advertising Common Object Model (AdCOM)](https://github.com/InteractiveAdvertisingBureau/AdCOM) がデフォルトのドメインレイヤーです。

# SPECIFICATION (仕様) <a name="specification"></a>

このセクションには、詳細な OpenRTB トランザクションレイヤーの仕様が含まれています。明示的に別段の指定がある場合、オプションとして注釈が付けられている場合、またはベストプラクティスとして呼びかけられている場合を除き、このセクションのすべての重要な側面は OpenRTB コンプライアンスに必須 (required) です。
## Object Model (オブジェクトモデル) <a name="objectmodel"></a>

以下の UML クラス図は、リクエストオブジェクトとレスポンスオブジェクトの両方を含む全体的なペイロード構造を示しています。ペイロードは名前付きオブジェクトをルートとしています。共通のルートとしての `Openrtb`、およびペイロードタイプを識別するための従属ルートとしての `Request` と `Response` です。

![](images/Figure4.png)

オブジェクトモデルのサブセクション全体を通して、属性は「必須 (Required)」または「推奨 (Recommended)」として示される場合があります。属性は、その省略がプロトコルを破損する場合にのみ *必須* と見なされ、それ以外の場合は必ずしもビジネス価値の指標ではありません。属性は、その省略がプロトコルを破損するわけではないが、ビジネス価値を劇的に低下させる場合に *推奨* とされます。

仕様への準拠の観点からは、*必須* と示されていない属性は、*推奨* であるかどうかにかかわらず、オプションです。オプションの属性には、省略された場合に想定されるデフォルト値がある場合があります。デフォルトが示されていない場合、慣例により、特に指定がない限り、その不在は *不明 (unknown)* と解釈されるべきです。空の文字列または null 値は、省略された場合と同じように解釈されるべきです（つまり、指定されている場合はデフォルト、そうでない場合は *不明*）。

**BEST PRACTICE (ベストプラクティス):** エクスチェンジとデマンドソースは、サポートするオプションのオブジェクトと属性のセット、および仕様への拡張機能をパートナーに公開することが推奨されます。

### Object:  Openrtb (Openrtb オブジェクト) <a name="object_openrtb"></a>

この最上位オブジェクトは、リクエストペイロードとレスポンスペイロードの両方のルートです。これには、バージョニング情報と、トランザクションの基礎となるレイヤー 4 ドメインモデルへの参照が含まれます。デフォルトでは、OpenRTB で使用されるドメインモデルは Advertising Common Object Model (AdCOM) です。

注：このドキュメントの慣例として、定義されるオブジェクトは、Java などのプログラミング言語でのクラス名の一般的な慣例に従って最初の文字が大文字で表記されますが、実際のオブジェクトのインスタンスおよびペイロード内の参照は小文字です。

| Attribute | Type | Definition |
| --- | --- | --- |
| `ver` | string | レイヤー 3 OpenRTB 仕様のバージョン（例："3.0"）。 |
| `domainspec` | string; default "adcom" | 販売アイテム、ビッドに関連付けられたメディアなどを定義するために使用されるレイヤー 4 ドメインモデルの識別子。 |
| `domainver` | string; required | `domainspec` 属性で参照されるレイヤー 4 ドメインモデルの仕様バージョン。 |
| `request` | object; required * | ビッドリクエストコンテナ。 * リクエストペイロードの場合のみ必須。[Object: Request (Request オブジェクト)](#object_request) を参照。 |
| `response` | object; required * | ビッドレスポンスコンテナ。 * レスポンスペイロードの場合のみ必須。[Object: Response (Response オブジェクト)](#object_response) を参照。 |


これらの属性の一部はオプションです。たとえば、`ver` 属性は、このペイロードが準拠する OpenRTB 仕様のバージョンを示します。これは、HTTP ヘッダーを介してレイヤー 1 でも伝達されます。ここでの有用性は、ランタイムトランザクションのコンテキスト外でペイロードをより自己文書化することにより、診断を支援することです。

ただし、`domainver` 属性には、レイヤー 4 オブジェクトの構造が仕様バージョンに基づいて時間の経過とともに変化する可能性があるため、ランタイムユーティリティがあります。この属性は、正しいドメインオブジェクトパーサーまたはアンマーシャリングコードを呼び出すのに役立ちます。

## Bid Request Payload (ビッドリクエストペイロード) <a name="bidrequestpayload"></a>

リクエストオブジェクトには、最小限のハイレベルな属性（例：ID、テストモード、オークションタイプ、最大オークション時間、バイヤーの制限など）と、リクエストのソースと実際の販売オファーをカバーする従属オブジェクトが含まれています。後者には、提供されているアイテムと適用可能なディールが含まれます。

このモデルには、レイヤー 4 ドメインオブジェクトとのインターフェースとなる 2 つのポイントがあります。`Request` オブジェクトと `Item` オブジェクトです。`Request` の下に含まれるドメインオブジェクトには、オファー全体のコンテキストを提供するものが含まれます。これらには、サイトまたはアプリ、デバイス、ユーザーなどを記述するオブジェクトが含まれます。`Item` オブジェクトに含まれるドメインオブジェクトは、提供されているアイテム（例：インプレッション機会）の詳細、および受け入れ可能なビッドに関連付けることができるメディアに関する仕様と制限を指定します。

### Object:  Request (Request オブジェクト) <a name="object_request"></a>

`Request` オブジェクトには、グローバルに一意のビッドリクエスト ID が含まれています。この `id` 属性は必須であり、少なくとも 1 つのオブジェクト（つまり、少なくとも 1 つの販売アイテム）を持つ `Item` 配列も必須です。その他の属性は、提供されているすべてのアイテムに適用されるルールと制限を確立します。このオブジェクトは、ユーザー、デバイス、サイトまたはアプリなどのコンテキストのためのレイヤー 4 ドメインオブジェクトともインターフェースします。

| Attribute | Type | Definition |
| --- | --- | --- |
| `id` | string; required | ビッドリクエストの一意の ID。エクスチェンジによって提供されます。 |
| `test` | integer; default 0 | オークションが請求可能 (billable) でないテストモードのインジケータ。0 = ライブモード、1 = テストモード。 |
| `tmax` | integer | タイムアウトを回避するために、エクスチェンジがビッドを受け取るために許可する最大時間（ミリ秒単位）。インターネットレイテンシを含みます。この値は、エクスチェンジからの一般的なガイダンスに優先します。エクスチェンジが仲介者として機能する場合、レイテンシと追加のインターネットホップを考慮して、受信したものからアウトバウンドの `tmax` 値を減らす必要があります (should)。 |
| `at` | integer; default 2 | オークションタイプ。1 = ファーストプライス、2 = セカンドプライスプラス。500 以上の値は、エクスチェンジ固有のオークションタイプに使用できます。 |
| `cur` | string array; default ["USD"] | このビッドリクエストに対するビッドの受け入れ通貨の配列。ISO-4217 アルファコードを使用します。エクスチェンジが複数の通貨を受け入れる場合に推奨されます。省略された場合、単一通貨の "USD" が想定されます。 |
| `seat` | string array | このアイテムに入札するためのバイヤーシート (buyer seats) の制限リスト。バイヤーの顧客とそのシート ID に関する知識は、事前に関係者間で調整する必要があります。省略は制限なしを意味します。 |
| `wseat` | integer; default 1 | `seat` 配列の制限解釈を決定するフラグ。0 = ブロックリスト、1 = 許可リスト。 |
| `cdata` | string | エクスチェンジによってサポートされている場合、ビッダーがエクスチェンジのクッキー（[Object: Response (Response オブジェクト)](#object_response) の `cdata` を参照）に設定されたデータを取得できるようにします。文字列は base85 のクッキーセーフな文字でなければなりません。 |
| `source` | object | インベントリソースおよび最終決定を行うエンティティに関するデータを提供する `Source` オブジェクト。[Object: Source (Source オブジェクト)](#object_source) を参照。 |
| `item` | object array; required | 販売のために提供される商品のセットを構成する `Item` オブジェクト（少なくとも 1 つ）の配列。[Object: Item (Item オブジェクト)](#object_item) を参照。 |
| `package` | integer | ロードブロッキングをサポートするために、提供されたアイテムがコンテキスト内のすべての利用可能なアイテム（例：Web ページ上のすべてのインプレッション、プレ/ミッド/ポストロールなどのすべてのビデオスポット）を表していることをエクスチェンジが確認できるかどうかを示すフラグ。0 = いいえ、1 = はい。 |
| `context` | object; recommended | `openrtb.domainspec` および `openrtb.domainver` で参照される仕様とバージョンに準拠する、提供されるアイテムのコンテキストを提供するレイヤー 4 ドメインオブジェクト構造。AdCOM v1.x の場合、ここで許可されるオブジェクト（すべてオプション）は、`DistributionChannel` サブタイプ（つまり、`Site`、`App`、または `Dooh`）の 1 つ、`User`、`Device`、`Regs`、`Restrictions`、および AdCOM で指定されているこれらに従属するオブジェクトです。 |
| `ext` | object | オプションのエクスチェンジ固有の拡張。 |


### Object:  Source (Source オブジェクト) <a name="object_source"></a>

このオブジェクトは、トランザクションの一意の ID、ソース認証情報、および管理の連鎖 (chain of custody) を含む、トランザクションのソースに関するデータを運びます。

注：属性 `ds`、`dsmap`、`cert`、および `digest` は、[Ads.cert: Signed Bid Requests specification](https://github.com/InteractiveAdvertisingBureau/openrtb/blob/master/ads.cert:%20Signed%20Bid%20Requests%201.0%20BETA.md) で定義されているデジタル署名されたビッドリクエストをサポートします。Ads.cert 仕様はまだベータ状態であるため、これらの属性も同様の状態であると見なされるべきです。

| Attribute | Type | Definition |
| --- | --- | --- |
| `tid` | string; recommended | このトランザクションのサプライチェーン全体のすべての参加者間で共通でなければならないトランザクション ID。これは、ヘッダービディングまたは同様のパブリッシャー中心のブロードキャストシナリオにおけるすべての参加エクスチェンジにも適用されます。 |
| `ts` | integer; recommended | サプライチェーンの開始時にリクエストが発生したときのタイムスタンプ（Unix 形式、つまりエポックからのミリ秒）。この値は、後続の仲介者全体を通して不変 (immutable) として保持されなければなりません。 |
| `ds` | string; recommended | このリクエストの起源を認証するために使用されるデジタル署名。ビッドリクエストにある不変の属性のセットから構成されるダイジェスト文字列から、パブリッシャーまたはその信頼できるエージェントによって計算されます。詳細については、「[Inventory Authentication (インベントリ認証)](#inventoryauthentication)」セクションを参照してください。 |
| `dsmap` | string | ダイジェストを作成するために使用される属性を示す識別子の順序付きリスト。このマップは、ビッドリクエストからダイジェストを再作成するための重要な指示を提供します。これは、`ds` 属性のデジタル署名を検証するために必要なステップです。詳細については、「[Inventory Authentication (インベントリ認証)](#inventoryauthentication)」セクションを参照してください。 |
| `cert` | string; recommended | `ds` 属性のデジタル署名を生成するために使用される証明書（つまり、公開鍵）のファイル名。詳細については、「[Inventory Authentication (インベントリ認証)](#inventoryauthentication)」セクションを参照してください。 |
| `digest` | string | デジタル署名を生成するために署名された完全なダイジェスト文字列。詳細については、「[Inventory Authentication (インベントリ認証)](#inventoryauthentication)」セクションを参照してください。注：これは、必要に応じたデバッグ目的のみを意図しています。帯域幅への影響のため、通常の Production トラフィック向けではありません。 |
| `schain` | object; recommended | このオブジェクトは、サプライチェーン内のリンクと、サプライチェーンが完全であるかどうかを示すインジケータの両方を表します。詳細は [SupplyChain object](https://github.com/InteractiveAdvertisingBureau/openrtb/blob/master/supplychainobject.md) を参照してください。 |
| `pchain` | string | TAG Payment ID Protocol で記述された埋め込み構文を含むペイメント ID チェーン文字列。注：この Source オブジェクトの認証機能は、"ads.txt" 仕様と組み合わせることで、この属性の非推奨につながる可能性があります。 |
| `ext` | object | オプションのエクスチェンジ固有の拡張。 |


### Object:  Item (Item オブジェクト) <a name="object_item"></a>

このオブジェクトは、公開市場またはプライベートマーケットプレイスディールに関連して販売のために提供される商品の単位を表します。同じビッドリクエストで複数のアイテムが提供される可能性があり、ビッドは関心のある特定のアイテムを参照する必要があるため、`id` 属性は必須です。このオブジェクトは、提供されるアイテムのより詳細な仕様（例：インプレッション）のためにレイヤー 4 ドメインオブジェクトとインターフェースします。

| Attribute | Type | Definition |
| --- | --- | --- |
| `id` | string; required | オファーのコンテキスト内でのこのアイテムの一意の識別子（通常は "1" で始まり、増加します）。 |
| `qty` | integer; default 1 | このアイテムが購入された場合に発生したとみなされる請求可能なイベントの数量。ほとんどの場合、これはインプレッションを表します。たとえば、DOOH プレースメントでの広告の 1 回の表示は、予想される視聴者数に基づいて複数のインプレッションとしてカウントされる場合があります。そのような場合、qty は 1 より大きくなります。'qty' または 'qtyflt' のいずれか 1 つのみが存在できます。 |
| `qtyflt` | float | このアイテムが購入された場合に発生したとみなされる請求可能なイベントの数量。フィールドのこのバージョンは、数量が整数として表現されない場合のために存在します。たとえば、DOOH の機会は 14.2 インプレッションと見なされる場合があります。'qty' または 'qtyflt' のいずれか 1 つのみが存在できます。 |
| `seq` | integer | 同じビッドリクエストで複数のアイテムが提供される場合、シーケンス番号により、調整された配信が可能になります。 |
| `flr` | float | CPM で表されるこのアイテムの最低入札価格。 |
| `flrcur` | string; default "USD" | ISO-4217 アルファコードを使用して指定された `flr` 属性の通貨。 |
| `exp` | integer | オークションと履行 (fulfilment) の間に経過する可能性のある秒数の勧告 (Advisory)。 |
| `dt` | integer | アイテムが履行されると予想されるタイムスタンプ（例：DOOH インプレッションが表示されるとき）。Unix 形式（つまり、エポックからのミリ秒）。 |
| `dlvy` | integer; default 0 | アイテム（例：Ad オブジェクト）の配信方法が必要。0 = いずれかの方法、1 = アイテムはトランザクションの一部として送信されなければならない（例：ビッド自体の値によって、ビッドに含まれる URL によってフェッチされる）、2 = エクスチェンジに以前にアップロードされたアイテムがその ID によって参照されなければならない。エクスチェンジが事前のアップロードをサポートしていない場合、デフォルトの 0 は実質的に 1 と同じであることに注意してください（参照するアイテムがないため）。 |
| `metric` | object array | `Metric` オブジェクトの配列。[Object: Metric (Metric オブジェクト)](#object_metric) を参照。 |
| `deal` | object array | このアイテムに適用される特別な条件を伝える `Deal` オブジェクトの配列。[Object: Deal (Deal オブジェクト)](#object_deal) を参照。 |
| `private` | integer; default 0 | `Deal` オブジェクトで指名されたシートへのオークション資格のインジケータ。0 = すべてのビッドが受け入れられる、1 = ビッドは指定されたディールとその条件に制限される。 |
| `spec` | object; required | `openrtb.domainspec` および `openrtb.domainver` で参照される仕様とバージョンに準拠する、提供されるアイテムを指定するレイヤー 4 ドメインオブジェクト構造。AdCOM v1.x の場合、ここで許可されるオブジェクトは `Placement` および AdCOM で指定されているこれらに従属するオブジェクトです。 |
| `ext` | object | オプションのエクスチェンジ固有の拡張。 |


### Object:  Deal <a name="object_deal"></a>

このオブジェクトは、セラーとバイヤーの間で事前に締結された特定のディールを構成します。これの存在は、このアイテムがそのディールの条件の下で利用可能であることを示します。

| Attribute | Type | Definition |
| --- | --- | --- |
| `id` | string; required | ディールの一意の識別子。 |
| `flr` | float | CPM で表されるこのアイテムの最低ディール価格。 |
| `flrcur` | string; default "USD" | ISO-4217 アルファコードを使用して指定された `flr` 属性の通貨。 |
| `at` | integer | リクエストの全体的なオークションタイプのオプションのオーバーライド。1 = ファーストプライス、2 = セカンドプライスプラス、3 = `flr` で渡された値が合意されたディール価格である。追加のオークションタイプは、500 以上の値を使用してエクスチェンジによって定義できます。 |
| `wseat` | string array | このディールへの入札を許可されたバイヤーシート (buyer seats) の許可リスト。参照するシートおよびバイヤーの顧客の ID は、事前にビッダーとエクスチェンジの間で調整する必要があります。省略は制限なしを意味します。 |
| `wadomain` | string array | このディールへの入札を許可された広告主ドメイン（例：advertiser.com）の配列。省略は制限なしを意味します。 |
| `ext` | object | オプションのエクスチェンジ固有の拡張。 |


### Object:  Metric (Metric オブジェクト) <a name="object_metric"></a>

このオブジェクトは、メトリックの配列としてアイテムに関連付けられます。これらのメトリックは、平均最近視認性、クリック率など、意思決定を支援する洞察を提供できます。各メトリックはそのタイプによって識別され、メトリックの値を報告し、オプションで値を測定したソースまたはベンダーを識別します。

| Attribute | Type | Definition |
| --- | --- | --- |
| `type` | string; required | 事前にビッダーに公開されるべきエクスチェンジがキュレーションした文字列名を使用して提示されるメトリックのタイプ。 |
| `value` | float; required | メトリックの値を表す数値。確率は 0.0 ～ 1.0 の範囲でなければなりません。 |
| `vendor` | string; recommended | 事前にビッダーに公開されるべきエクスチェンジがキュレーションした文字列名を使用した値のソース。エクスチェンジ自体がサードパーティではなくソースである場合、「EXCHANGE」が推奨されます。 |
| `ext` | object | オプションのエクスチェンジ固有の拡張。 |


## Bid Response Payload (ビッドレスポンスペイロード) <a name="bidresponsepayload"></a>

レスポンスオブジェクトには、最小限のハイレベルな属性（例：リクエスト ID への参照、ビッド通貨など）と、それぞれがバイヤーシート (buyer seat) を代表するビッドのセットであるシートビッド (seat bids) の配列が含まれています。

個々のビッドは、それが関係するリクエスト内のアイテムと、価格、適用可能な場合はディール ID、および通知 URL などの購入情報を参照します。ビッドに関連するメディアは、各ビッドに含まれるレイヤー 4 ドメインオブジェクト（つまり、広告クリエイティブ、マークアップ）を介して伝達されます。

### Object:  Response (Response オブジェクト) <a name="object_response"></a>

このオブジェクトは、`Openrtb` ルートの下のビッドレスポンスオブジェクトです。その `id` 属性は、ビッドリクエスト ID の反映です。`bidid` 属性は、ビッダーのためのオプションのレスポンス追跡 ID です。指定された場合、マークアップおよび通知 URL に配置された置換マクロで使用できます。少なくとも 1 つのアイテムに対する `Bid` を含む、少なくとも 1 つの `Seatbid` オブジェクトが必須です。その他の属性はオプションです。

「ノービッド (no-bid)」を表現するための最もコンパクトなオプションは、HTTP 204 で空のレスポンスを返すことです。ただし、ビッダーが入札しない理由を伝えたい場合は、`nbr` 属性に理由コードを入れた `Response` オブジェクトを返すことができます。

| Attribute | Type | Definition |
| --- | --- | --- |
| `id` | string; required | これがレスポンスであるビッドリクエストの ID。`request.id` 属性と一致しなければなりません。 |
| `bidid` | string | ログ記録/追跡を支援するためのビッダー生成のレスポンス ID。 |
| `nbr` | integer | 適用可能な場合、入札しない理由（[List: No-Bid Reason Codes (リスト：ノービッド理由コード)](#list_nobidreasoncodes) を参照）。多くのエクスチェンジは、ノービッドを示すために単純な HTTP 204 レスポンスを好みますが、理由コードを示すレスポンスはデバッグシナリオで役立ちます。 |
| `cur` | string; default "USD" | ISO-4217 アルファコードを使用したビッド通貨。 |
| `cdata` | string | エクスチェンジによってサポートされている場合、ビッダーがエクスチェンジのクッキーにデータを設定できるようにします。これはビッドリクエストで取得できます（[Object: Request (Request オブジェクト)](#object_request) の `cdata` を参照）。文字列は base85 クッキーセーフな文字でなければなりません。 |
| `seatbid` | object array | `Seatbid` オブジェクトの配列。ビッドが行われる場合は 1 つ以上必須。[Object: Seatbid (Seatbid オブジェクト)](#object_seatbid) を参照。 |
| `ext` | object | オプションのデマンドソース固有の拡張。 |


### Object:  Seatbid (Seatbid オブジェクト) <a name="object_seatbid"></a>

ビッドレスポンスには、それぞれが異なるバイヤーシート (buyer seat) を代表し、それぞれが 1 つ以上の個別のビッドを含む複数の `Seatbid` オブジェクトを含めることができます。リクエストオファーで複数のアイテムが提示されている場合、`package` 属性を使用して、シートが勝つことができるインプレッションを受け入れる意思があるか（デフォルト）、それともグループとしてすべてを勝つことができる場合にのみ勝つことに関心があるかを指定できます。

| Attribute | Type | Definition |
| --- | --- | --- |
| `seat` | string, recommended | このビッドが行われるバイヤーシート (buyer seat) の ID。 |
| `package` | integer; default 0 | 複数のアイテムを含むオファーの場合、このフラグは、ビッダーがビッドのサブセットでの勝利を受け入れる意思があるか、パッケージとして完全なグループを必要とするかを示します。0 = 個々の勝利を受け入れる、1 = パッケージの勝利または敗北のみ。 |
| `bid` | object array; required | アイテムに関連する 1 つ以上の `Bid` オブジェクトの配列。複数のビッドが同じアイテムに関連する場合があります。[Object: Bid (Bid オブジェクト)](#object_bid) を参照。 |
| `ext` | object | オプションのデマンドソース固有の拡張。 |


### Object:  Bid (Bid オブジェクト) <a name="object_bid"></a>

`Seatbid` オブジェクトには 1 つ以上の `Bid` オブジェクトが含まれており、それぞれが「item」属性を介してビッドリクエストオファー内の特定のアイテムに関連し、そのアイテムを指定された価格で購入するというオファーを構成します。

| Attribute | Type | Definition |
| --- | --- | --- |
| `id` | string; recommended | ログ記録/追跡を支援するためのビッダー生成のビッド ID。 |
| `item` | string; required | 関連するビッドリクエスト内のアイテムオブジェクトの ID。具体的には `item.id`。 |
| `price` | float; required | 実際のトランザクションはユニットアイテムのみですが、CPM として表されるビッド価格。タイプは float を示していますが、通貨を処理する場合（例：Java の BigDecimal）は整数演算が強く推奨されることに注意してください。 |
| `deal` | string | このビッドがプライベートマーケットプレイスディールに関連する場合、ビッドリクエストからのディールへの参照。具体的には `deal.id`。 |
| `cid` | string | キャンペーン ID またはブランド関連広告のその他の同様のグループ化。通常、監査プロセスの効率を高めるために使用されます。 |
| `tactic` | string | バイヤーがビッドが送信された戦術 (tactic) をエクスチェンジに報告するためのラベルをビッドに付けることを可能にする戦術 ID。戦術 ID の具体的な使用法と意味は、バイヤーとエクスチェンジの間で事前に伝達されるべきです。 |
| `purl` | string | OpenRTB 準拠のサプライチェーンの範囲内でビッドが勝者と宣言されたときにエクスチェンジによって呼び出される保留中 (pending) 通知 URL（つまり、ヘッダービディングなどの準拠していない意思決定がまだある可能性があります）。置換マクロを含めることができます。 |
| `burl` | string; recommended | エクスチェンジ固有のビジネスポリシー（例：レンダリングされたマークアップ）に基づいて落札ビッドが請求可能 (billable) になったときにエクスチェンジによって呼び出される請求 (billing) 通知 URL。置換マクロを含めることができます。 |
| `lurl` | string | ビッドが失われたことが判明したときにエクスチェンジによって呼び出される Loss 通知 URL。置換マクロを含めることができます。エクスチェンジ固有のポリシーにより、Loss 通知のサポート、または勝者のクリアリングプライスの開示が排除され、`${OPENRTB_PRICE}` マクロが削除される（つまり、長さゼロの文字列に置き換えられる）場合があります。 |
| `exp` | integer | バイヤーがオークションと履行 (fulfilment) の間に待機する意思がある秒数の勧告 (Advisory)。 |
| `mid` | string | メディアをドメインオブジェクトの値として含めるのではなく、以前にエクスチェンジにアップロードされている場合に参照によって指定できるようにするための ID。 |
| `macro` | object array | ビッド固有の値をマークアップに代入できるようにする `Macro` オブジェクトの配列。特に、`mid` 属性を介して参照される以前にアップロードされたメディアに役立ちます。[Object: Macro (Macro オブジェクト)](#object_macro) を参照。 |
| `media` | object | ビッドが勝った場合に提示されるメディアを指定するレイヤー 4 ドメインオブジェクト構造。`openrtb.domainspec` および `openrtb.domainver` で参照される仕様とバージョンに準拠します。AdCOM v1.x の場合、ここで許可されるオブジェクトは「Ad」および AdCOM で指定されているそれに従属するオブジェクトです。 |
| `ext` | object | オプションのデマンドソース固有の拡張。 |


### Object:  Macro (Macro オブジェクト) <a name="object_macro"></a>

このオブジェクトは、動的値をメディアマークアップに注入するために使用される、バイヤー定義のキー/値ペアを構成します。それらがどのように伝達されるかに関係なく、あらゆるメディアマークアップに適用されますが、主なユースケースは、トランザクションの前にエクスチェンジにアップロードされ（例：クリエイティブ品質レビューのために事前登録）、ビッドで参照されるメディア用です。ランタイムに置換されるマクロの完全な形式は `${CUSTOM_KEY}` であり、「`KEY`」は `key` 属性で提供される名前です。これにより、標準の OpenRTB マクロとの競合が発生しないことが保証されます。

| Attribute | Type | Definition |
| --- | --- | --- |
| `key` | string; required | バイヤー固有のマクロの名前。 |
| `value` | string | マークアップで見つかったマクロの各インスタンスに代入する値。 |
| `ext` | object | オプションのデマンドソース固有の拡張。 |
## Substitution Macros (置換マクロ) <a name="substitutionmacros"></a>

イベント通知 URL とその形式は、デマンドソースによって定義されます。エクスチェンジが特定の情報（例：クリリングプライス）を伝達するために、これらの URL にいくつかのマクロを挿入できます。エクスチェンジは、呼び出す前にこれらを解決する責任があります。置換は、正当なマクロが見つかった場所であればどこでも、構文の正しさに関係なく置き換えられるという意味で、単純であると想定されます。さらに、ソース値が指定されていないオプションのパラメータである場合、マクロは単に削除されます（つまり、長さゼロの文字列に置き換えられます）。

カスタムマクロは、ビッダー実装者の裁量でサポートされる場合もあります。事前アップロードされた広告への参照によって入札が行われる場合、動的データを注入するためのカスタムマクロのサポートが一般的に必要です。カスタムマクロは `${CUSTOM_KEY}` の形式で使用され、"`KEY`" は「Macro」オブジェクトで指定された正確な文字列であり、大文字と小文字などの変更はありません。詳細については、「Macro」オブジェクトを参照してください。エクスチェンジはカスタムマクロをサポートするかどうかを選択することもできますが、事前アップロードされた広告を配信する機能を提供するエクスチェンジは、サポートすることが期待されます。

これらと同じ置換マクロを広告マークアップに配置することもできます。エクスチェンジは、前述の通知 URL と同じデータ置換を実行します。これは、マークアップがどのように取得されたかに関係なく発生します。使用例としては、クリアリングプライスなどのデータを、マークアップに埋め込まれた追跡 URL に注入することです。

次の表は、標準の置換マクロを定義しています。OpenRTB 準拠のエクスチェンジは、データが利用可能なすべてのマクロをサポートし、マークアップと通知 URL の両方で置換をサポートしなければならないことに注意してください。

| Macro | Definition |
| --- | --- |
| `${OPENRTB_ID}` | ビッドリクエストの ID。`request.id` 属性から。 |
| `${OPENRTB_BID_ID}` | ビッドの ID。`response.bidid` 属性から。 |
| `${OPENRTB_ITEM_ID}` | 勝ち取ったばかりのアイテムの ID。`item.id` 属性から。 |
| `${OPENRTB_ITEM_QTY}` | 勝ち取ったばかりのアイテムの数量。`item.qty` または `item.qtyflt` 属性から。 |
| `${OPENRTB_SEAT_ID}` | ビッダーシートの ID。`seatbid.seat` 属性から。 |
| `${OPENRTB_MEDIA_ID}` | 配信される以前に登録されたメディアの ID。`bid.mid` 属性から。 |
| `${OPENRTB_PRICE}` | ビッドと同じ通貨を使用したクリアリングプライス。 |
| `${OPENRTB_CURRENCY}` | ビッドで使用される通貨（明示的または暗黙的）。確認のみを目的としています。 |
| `${OPENRTB_MBR}` | マーケットビッド比率 (Market Bid Ratio)。クリアランスプライス / ビッド価格として定義されます。 |
| `${OPENRTB_LOSS}` | Loss 理由コード（[List: Loss Reason Codes (リスト：Loss 理由コード)](#list_lossreasoncodes) を参照）。 |
| `${OPENRTB_MIN_TO_WIN}` | エクスチェンジのオークションに勝つための最低入札額。ビッドと同じ通貨と単位を使用します。 |


テストまたは広告品質の目的でマークアップをレンダリングする場合、一部のマクロ値（例：クリアリングプライス）が不明な場合があります。このような場合、マクロ値として `AUDIT` を代入してください。

置換の前に、マクロデータ値は、さまざまな難読化または暗号化アルゴリズムを使用してセキュリティ目的でエンコードできます。これは、価格情報がエクスチェンジを超えてパブリッシャーを通じて、マークアップ内の追跡ピクセルを介してデバイスブラウザに運ばれるユースケースで特に関心があるかもしれません。

特定のマクロをエンコードすることを指定するには、マクロ名のサフィックスとして `:X` を追加する必要があります。ここで X は、使用されるアルゴリズムを示す文字列です。アルゴリズムの選択はこの仕様では定義されておらず、当事者間で相互に合意する必要があります。例として、価格マクロが Base64 を使用してエンコードされ、そのコードが `B64` であると合意されたとします。マクロは次のようになります。

`${OPENRTB_PRICE:B64}`

## Event Notification (イベント通知) <a name="eventnotification"></a>

この仕様では、以下のイベントが定義されています。追加のイベントは、ドメインオブジェクトに固有のレイヤー 4 で定義される場合があります。イベント URL を呼び出すエンティティは、まず、すべての標準 OpenRTB 置換マクロの解決を確認する必要があります。

### Event:  Pending (Pending イベント) <a name="event_pending"></a>

Pending 通知は、OpenRTB 準拠のサプライチェーンの範囲内でビッドが勝者として選択されたことを示します。唯一の決定者としてのエクスチェンジで構成される単純なサプライチェーンでは、これはオークションに勝つことと同義です。複雑なサプライチェーンの場合、このイベントは、OpenRTB 経由で結果を伝達していないパブリッシャーに最も近いエクスチェンジによって開始されます。ただし、OpenRTB に準拠していないアップストリームの意思決定（例：ヘッダービディング）がまだある可能性があるため、このイベントは常に勝利と同一視できるとは限りません。エクスチェンジは、`bid.purl` 属性でデマンドソースによって提供された URL を呼び出すことによって、このイベントを伝達します。

**NOTE (注):** このイベントはガイダンスとしてのみ解釈されるべきです（つまり、ビッドはサプライチェーン内のすべての OpenRTB 準拠のゲートを通過しました）。これは、いかなる形式の履行または請求の表示でもありません。

### Event:  Billing (Billing イベント) <a name="event_billing"></a>

Billing イベントは、トランザクションの結果として、エクスチェンジまたはその他の仲介者からデマンドサイドパートナーの 1 つに金銭的請求が発生した場合です。このイベントは、デマンドパートナーに明確に伝えられるべきエクスチェンジ固有のビジネスポリシーの対象となります。DSP の場合、このイベントは、関連するキャンペーンに対して支出を減額できることを示します。エクスチェンジは、`bid.burl` 属性でデマンドソースによって提供された URL を呼び出すことによって、このイベントを伝達します。

**NOTE (注):** クリアリングプライスマクロは他のイベントやマークアップ内の DSP トラッカーでも解決される可能性がありますが、この URL が適切に実装されていることが、OpenRTB プロトコルで Billing イベントを通信する唯一の公式な方法です。

**BEST PRACTICE (ベストプラクティス):** Billing URL の発火は、エクスチェンジとそのデマンドパートナー間の商取引の履行を表します。これは、クライアントサイドピクセルを含む他の当事者に委任されるべきではありませんが、ピクセルはエクスチェンジへの請求の開始シグナルになる可能性があります。

**BEST PRACTICE (ベストプラクティス):** 請求可能なイベントが発生したと判断した場合（例：クライアント開始のレンダリングシグナルの受信）、エクスチェンジは、サーバーサイドから、エクスチェンジが収益を計上する場所にできるだけ「近い」場所から Billing 通知を呼び出して、それ自体とデマンドソースの間の不一致を最小限に抑えるべきです (should)。

**BEST PRACTICE (ベストプラクティス):** エクスチェンジは、潜在的に複数のオークション決定ポイントがある複雑なサプライチェーンシナリオで最も一貫したアプローチとして、Billing イベントの基礎としてクライアント開始のレンダリングイベントまたは同等のものに標準化することを強く推奨されます。

**BEST PRACTICE (ベストプラクティス):** パブリックインターネットはノイズが多く、このイベントは金銭的な性質のものです。Billing 通知を呼び出すエンティティが HTTP 200 または 204 以外の応答を受け取った場合、再試行スキーム（例：次の 1 分間、10 秒ごと）を検討する必要があります。逆に、Billing 通知を受け取るエンティティは、二重計上を避けるためにエンドポイントを冪等 (idempotent) にするよう努めるべきです。

VAST Video の場合、IAB は VAST インプレッションイベントがインプレッションが請求可能であることを示す公式シグナルであると規定しています。`bid.burl` 属性が指定されている場合、エクスチェンジがこのポリシーに従っているなら、それも同時に発火されるべきです。ただし、微妙な技術的な問題により追加の不一致が生じる可能性があり、ビッダーはこのシナリオを避けるよう警告されます。1 つのオプションは、ビデオサプライソースに最も近いエクスチェンジがインプレッショントラッカーを請求シグナルとして使用し、記述されているように Billing 通知を使用することです。

### Event:  Loss (Loss イベント) <a name="event_loss"></a>

Loss イベントは、エクスチェンジがビッドに勝つ見込みがないと判断した場合です。この時点で、エクスチェンジは `bid.lurl` 属性でデマンドソースによって提供された URL を呼び出すことができます。

**NOTE (注):** Loss 通知がないことは、勝利を意味するものではありません。

Loss 通知の発火に対するエクスチェンジのサポートは、OpenRTB コンプライアンスには必須ではありません。デマンドパートナーは、サプライサイドパートナーに確認することをお勧めします。さらに、エクスチェンジ固有のポリシーにより、Loss 通知のサポート、または勝者のクリアリングプライスの開示が排除され、`${OPENRTB_PRICE}` マクロが削除される（つまり、長さゼロの文字列に置き換えられる）場合があります。

### Complex Event Chains (複雑なイベントチェーン) <a name="complexeventchains"></a>

複雑なサプライチェーンシナリオでは、仲介者はこれらのイベントに参加する（つまり、受信し、処理し、転送する）か、バイパスさせるかを選択できます。たとえば、ビッドリクエストのトラフィックシェーパーなどの仲介者は、イベントを直接ダウンストリームにバイパスさせることを選択する場合がありますが、特にレベニューシェアに従事する完全なエクスチェンジは、インターセプトする必要がある場合があります。

インターセプトするかバイパスするかの動機も、イベントタイプによって異なる場合があります。たとえば、仲介者はほぼ常に Billing 通知をインターセプトすることを選択します。一方、Loss 通知については、関心がある場合とそうでない場合があります。特定のビッド（例：フロア未満、ブロックリスト違反など）をドロップし、残りをビッドレスポンスに含めるエクスチェンジを考えてみましょう。その一部はアップストリームで負けます。ドロップしたものについては、本質的にこれらの損失を宣言しているため、Loss 通知を呼び出す必要がありますが、次のビッドサブセットをドロップすることを決定したときに、アップストリームエンティティが直接ダウンストリームに Loss 通知を呼び出すことを許可することを選択する場合があります。

特定のビッドでイベントのインターセプトを実行するために、仲介者は元の URL のマクロを解決し、その URL をパラメータとして新しい URL にエンコードして、潜在的に新しいマクロセット（例：アップストリームのクリアリングプライスを知るため）とともに自分自身を指すようにし、この新しい URL をアップストリームに返されるビッドで指定します。このイベント URL を受信すると、仲介者はイベントを処理し、元の URL を取得、デコード、および発火します。イベントをバイパスさせるには、仲介者は単にアップストリームに返されるビッド内の元の URL を保持します。

## Inventory Authentication (インベントリ認証) <a name="inventoryauthentication"></a>

ビッドリクエストに署名する機能は、このインベントリの単位が主張どおりのものであるという保証をバイヤーに提供することです（例：`domain-spoofer.com` が `domain.com` を装うのを防ぐため）。この慣行は、バイヤーがすべての仲介者と信頼関係を持っていない可能性がある複雑なサプライチェーンで特に重要になります。「ads.cert」と呼ばれるこの機能は単独で使用できますが、IAB ads.txt 仕様（[iabtechlab.com/ads-txt](https://iabtechlab.com/ads-txt) を参照）と組み合わせて使用すると最も効果的です。

これらを一緒に使用すると、エクスチェンジはバイヤーに次の保証付きでビッドリクエストを提示できます。*「私は `domain.com` のパブリッシャーのインベントリを販売する権限を持っています。そして、このインベントリの単位は実際に `domain.com` からのものです。」*

### Ads.cert Primer (Ads.cert 入門) <a name="adscertprimer"></a>

デジタル署名は、パブリッシャーまたはその信頼できるエージェント（例：主要なテクノロジープロバイダー）のいずれかによって生成されなければなりません。以下、署名当事者を単にパブリッシャーと呼びます。インベントリを認証する前に、パブリッシャーは公開鍵と秘密鍵のペアを生成する必要があります。秘密鍵はパブリッシャーが署名に使用するもので、秘密にしておく必要があります。公開鍵は、ads.txt 標準で指定されているのと同じ公的にアクセス可能な Web ディレクトリに配置する必要があります。

仲介者によってリクエストの一部が変更される正当なユースケースがあるため（例：インベントリを充実させるための新しいデータ、プライバシーポリシーに基づく IP アドレスまたは位置情報の精度の低下など）、ビッドリクエスト全体に署名することはできません。代わりに、インベントリ認証に重要であり、仲介者が変更してはならないリクエスト内の特定の属性（例：パブリッシャーのサイトドメインまたはアプリケーションバンドル）が選択されます。これらの属性は、単純ですが非常に特定の方法で *digest (ダイジェスト)* 文字列に組み立てられます。

さらに、ダイジェストには、リプレイ攻撃を回避するために、デジタル署名をこのトランザクションのみに結び付ける要素を含める必要があります。したがって、ダイジェストにはトランザクション ID（つまり、`Source.tid` 属性）および/または少なくともリクエスト発生タイムスタンプ（つまり、`Source.ts` 属性）を含める必要があります。

各インプレッションリクエストで、パブリッシャーはダイジェストを作成し、秘密鍵とともに使用してデジタル署名文字列を生成します。この署名は、`Source.ds` 属性に配置するために、エクスチェンジ、またはより一般的には最初のサプライチェーンエンティティに利用可能になります。`Source` オブジェクトには、ads.txt ディレクトリにあるパブリッシャーの公開鍵の名前（つまり、`Source.cert` 属性）と、署名された文字列を作成するために使用されたダイジェスト構造のマップ（つまり、`Source.dsmap` 属性）も含める必要があります。

この情報を使用して、リクエストを認証したいバイヤーまたはダウンストリームの仲介者は、ダイジェストマップの規定通りにビッドリクエストのフィールドからダイジェストを再作成し、公開鍵を使用してデジタル署名に対して検証できます。

この属性を持つビッドリクエストを受信した仲介者は、この署名を構成するすべての重要な属性とともに、変更なしですべてのダウンストリームビッドリクエストに含める義務があります。そうしないと、このインベントリ単位を認証できなくなり、バイヤーから拒否される対象となります。

### Detailed Implementation Guide

これらの概念を実践するために、パブリッシャーまたはその信頼できるエージェントは、公開鍵/秘密鍵ペアを生成する方法、トランザクションダイジェスト文字列に署名する方法、およびこれと関連情報を直接のエクスチェンジパートナーに伝達する方法を知っている必要があります。パブリッシャーとリクエストを認証したいベンダーの両方が、ビッドリクエスト属性からダイジェスト文字列を作成する正確な方法と、公開鍵を指定して署名を検証する方法を知っている必要があります。

これらの詳細については、[ads.cert Beta Specification](https://github.com/InteractiveAdvertisingBureau/openrtb/blob/master/ads.cert:%20Signed%20Bid%20Requests%201.0%20BETA.md) を参照してください。

## Enumerations (列挙型) <a name="enumerations"></a>

以下のリストは、ペイロードオブジェクトの属性によって参照される列挙型を定義しています。

### List:  No-Bid Reason Codes

以下の表は、ビッダーがアイテムに入札しなかった理由をエクスチェンジに通知するためのオプションを示しています。

| Value | Definition |
| --- | --- |
| 0 | Unknown Error |
| 1 | Technical Error |
| 2 | Invalid Request |
| 3 | Known Web Crawler |
| 4 | Suspected Non-Human Traffic |
| 5 | Cloud, Data Center, or Proxy IP |
| 6 | Unsupported Device |
| 7 | Blocked Publisher or Site |
| 8 | Unmatched User |
| 9 | Daily User Cap Met |
| 10 | Daily Domain Cap Met |
| 11 | Ads.txt Authorization Unavailable |
| 12 | Ads.txt Authorization Violation |
| 13 | Ads.cert Authentication Unavailable |
| 14 | Ads.cert Authentication Violation |
| 15 | Insufficient Auction Time |
| 16 | Incomplete SupplyChain |
| 17 | Blocked SupplyChain Node |
| 500+ | Exchange specific values; should be communicated with buyers beforehand. |


### List:  Loss Reason Codes (リスト: Loss 理由コード) <a name="list_lossreasoncodes"></a>

以下の表は、エクスチェンジがビッダーに対してアイテムを獲得できなかった理由を通知するためのオプションを示しています。

| Value | Definition |
| --- | --- |
| 0 | Bid Won |
| 1 | Internal Error |
| 2 | Impression Opportunity Expired |
| 3 | Invalid Bid Response |
| 4 | Invalid Deal ID |
| 5 | Invalid Auction ID |
| 6 | Invalid Advertiser Domain |
| 7 | Missing Markup |
| 8 | Missing Creative ID |
| 9 | Missing Bid Price |
| 10 | Missing Minimum Creative Approval Data |
| 100 | Bid was Below Auction Floor |
| 101 | Bid was Below Deal Floor |
| 102 | Lost to Higher Bid |
| 103 | Lost to a Bid for a Deal |
| 104 | Buyer Seat Blocked |
| 200 | Creative Filtered - General; Reason Unknown |
| 201 | Creative Filtered - Pending Processing by Exchange (e.g., approval, transcoding, etc.) |
| 202 | Creative Filtered - Disapproved by Exchange |
| 203 | Creative Filtered - Size Not Allowed |
| 204 | Creative Filtered - Incorrect Creative Format |
| 205 | Creative Filtered - Advertiser Exclusions |
| 206 | Creative Filtered - App Store ID Exclusions |
| 207 | Creative Filtered - Not Secure |
| 208 | Creative Filtered - Language Exclusions |
| 209 | Creative Filtered - Category Exclusions |
| 210 | Creative Filtered - Creative Attribute Exclusions |
| 211 | Creative Filtered - Ad Type Exclusions |
| 212 | Creative Filtered - Animation Too Long |
| 213 | Creative Filtered - Not Allowed in Deal |
| 214 | Creative Filtered - Invalid SKAdNetwork |
| 215 | Creative Filtered - App Bundle Exclusions |
| 500+ | Exchange specific values; should be communicated with buyers beforehand. |


# EXAMPLES (例) <a name="examples"></a>

以下は、JSON を使用して表現されたレイヤー 3 リクエスト/レスポンスペイロードの例です。

## Bid Request (ビッドリクエスト) <a name="bidrequest"></a>

以下は、販売のために提供される単一のアイテムと、それに関連付けられた単一のプライベートマーケットプレイスディールを含むビッドリクエストのレイヤー 3 の例です。簡潔にするために、いくつかのオプションの属性は省略されています。`spec` と `context` は AdCOM で指定されたドメインオブジェクトへのインターフェースであることに注意してください。`spec` オブジェクトには、このアイテムの下で提供されているインプレッションの詳細を運ぶ `placement` オブジェクトが 1 つ必要です。`context` オブジェクトは、`device`、`user`、`regs`、`restrictions` のいずれかと、`site`（例に表示）、`app`、または `dooh` のいずれか最大 1 つを持つことができます。

```
{
   "openrtb": {
      "ver": "3.0",
      "domainspec": "adcom",
      "domainver": "1.0",
      "request": {
         "id": "0123456789ABCDEF",
         "tmax": 150,
         "at": 2,
         "cur": [ "USD", "EUR" ],
         "source": {
            "tid": "FEDCBA9876543210",
            "ts": 1541796182157,
            "ds": "AE23865DF890100BECCD76579DD4769DBBA9812CEE8ED90BF",
            "dsmap": "...",
            "cert": "ads-cert.1.txt",
            "pchain": "..."
         },
         "package": 0,
         "item": [
            {
               "id": "1",
               "qty": 1,
               "private": 0,
               "deal": [
                  {
                     "id": "1234",
                     "flr": 1.50
                  }
               ],
               "spec": {
                  "placement": {  Refer to the AdCOM Specification.  }
               }
            }
         ],
         "context": {
            "site": {  Refer to the AdCOM Specification.  },
            "user": {  Refer to the AdCOM Specification.  },
            "device": {  Refer to the AdCOM Specification.  },
            "regs": {  Refer to the AdCOM Specification.  },
            "restrictions": {  Refer to the AdCOM Specification.  }
         }
      }
   }
}
```

## Bid Response (ビッドレスポンス) <a name="bidresponse"></a>

以下は、ビッドレスポンスのレイヤー 3 の例です。これは、`response.id` が `request.id` に一致すること、ビッド内の `bid.item` 属性がリクエストの `item.id` を参照すること、および `bid.deal` 内のディール参照がリクエスト内の提供されたディール `deal.id` を指すことに関して、前のビッドリクエストの例を参照しています。`media` は AdCOM で指定されたドメインオブジェクトへのインターフェースであることに注意してください。「media」オブジェクトには、ビッドが勝った場合に配信される広告の詳細を運ぶ `ad` オブジェクトが 1 つ必要です。

説明のために、この例では、動的値のマクロを使用して以前にアップロードされたメディアを参照するための `mid` パラメータと、`domain` オブジェクト参照の両方を示しています。実際には、メディアは値によって渡されるか（つまり、ドメインオブジェクトとして詳細が含まれる）、または参照によって渡されます（つまり、メディア ID とオプションのマクロを使用する）。

```
{
   "openrtb": {
      "ver": "3.0",
      "domainspec": "adcom",
      "domainver": "1.0",
      "response": {
         "id": "0123456789ABCDEF",
         "bidid": "0011223344AABBCC",
         "seatbid": [
            {
               "seat": "XYZ",
               "bid": [
                  {
                     "id": "yaddayadda",
                     "item": "1",
                     "deal": "1234",
                     "price": 1.50,
                     "tactic": "...",
                     "purl": "...",
                     "burl": "...",
                     "lurl": "...",
                     "mid": "...",
                     "macro": [
                        {
                           "key": "TIMESTAMP",
                           "value": "1127987134"
                        },
                        {
                           "key": "CLICKTOKEN",
                           "value": "A7D800F2716DB"
                        }
                     ],
                     "media": {
                        "ad": {  Refer to the AdCOM Specification.  }
                     }
                  }
               ]
            }
         ]
      }
   }
}
```

# Appendix A:  Additional Resources (付録 A: 追加リソース) <a name="appendixa_additionalresources"></a>

Interactive Advertising Bureau Technology Laboratory (IAB Tech Lab)
[www.iabtechlab.com](https://www.iabtechlab.com)

Creative Commons / Attribution License
[creativecommons.org/licenses/by/3.0](https://creativecommons.org/licenses/by/3.0)

AdCOM Project on Github
[https://github.com/InteractiveAdvertisingBureau/AdCOM](https://github.com/InteractiveAdvertisingBureau/AdCOM)

OpenRTB v3.0 Specification
[https://github.com/InteractiveAdvertisingBureau/openrtb](https://github.com/InteractiveAdvertisingBureau/openrtb)

ads.cert Specification
[ads.cert beta specification](https://github.com/InteractiveAdvertisingBureau/openrtb/blob/master/ads.cert:%20Signed%20Bid%20Requests%201.0%20BETA.md)

ads.text Specification
[iabtechlab.com/ads-txt](https://iabtechlab.com/ads-txt)

JavaScript Object Notation (JSON)
[www.json.org](https://www.json.org/)

Apache Avro
[Avro.apache.org](http://avro.apache.org)

Protocol Buffers (Protobuf)
[github.com/google/protobuf](https://github.com/google/protobuf)

# Appendix B:  Change Log (付録 B: 変更履歴) <a name="appendixb_changelog"></a>

この付録は、仕様の変更の簡単な要約として機能します。これらの変更は、仕様の実質的な部分にのみ関係し、日常的なドキュメントのフォーマット、情報の整理、または技術的な影響のない内容には関係しません。それについては、[Appendix C: Errata (付録 C: 正誤表)](#appendixc_errata) を参照してください。

| Version | Release | Changes |
| --- | --- | --- |
| 3.0 | March 2022 | **Added** schain to the source object to sync with 2.6. **New macro:** OPENRTB_MIN_TO_WIN |
| 3.0 | September 2021 | **Clarified loss reason:** Loss Reason Code 206 was renamed from Bundle to Store ID to keep the intent of this loss reason consistent across OpenRTB 2.x and 3.x. **New loss reason:** Added loss reason code 215 for App Bundle Exclusions as part of the Loss Reason 206 clarification. |
| 3.0 | August 2021 | **New loss reason:** Added loss reason code 214 for Invalid SKAdNetwork. |
| 3.0 | June 2020 | **No bid reasons:** Reasons associated with SupplyChain have been added. **DOOH improvements:** A field has been added to represent quantity of impressions as a float, since DOOH impressions may not be a whole number. A corresponding macro has been added too. |
| 3.0 | February 2020 | **Regulatory guidance:** A section has been added to call attention to the expectation that implementers comply with applicable laws or regulations. |
| 3.0 | November 2019 | **Versioning policy:** Elaborated on the versioning of this specification. |
| 3.0 | November 2018 | **Initial release of OpenRTB 3.0:** Complex supply chains, layered specification architecture, and digital signing for inventory authenticity. |
| 2.5 | N/A | Support for header bidding, billing and loss notifications, Flex Ads, Payment ID, tactic ID, impression metrics, out-stream video, and many more minor enhancements. |
| 2.4 | N/A | Support for Audio ad units and the largest set of minor to moderate enhancements in v2.x history. |
| 2.3 | N/A | Support for Native ad units and multiple minor enhancements. |
| 2.2 | N/A | New enhancements for private marketplace direct deals, video, mobile, and regulatory signals. |
| 2.1 | N/A | Revisions for IQG compliance, minor enhancements, and corrections. |
| 2.0 | N/A | Combines display, mobile, and video standards into a unified specification. |
| 1.0 | N/A | Original release of OpenRTB Mobile. |


# Appendix C:  Errata (付録 C: 正誤表) <a name="appendixc_errata"></a>

この付録は、バージョン付きリリース後にこのドキュメントに加えられた修正をカタログ化します。ドキュメントの本文はそれに応じて更新されています。

説明の明確化や修正などの軽微な修正のみが正誤表として扱われる場合があります。改善または重要な変更は、変更履歴に要約されています。

変更の詳細な内容は、ドキュメントのコミット履歴を確認することで確認できます。

**Link fixes, language improvements:** Some broken links have been fixed. Word choice has been improved in places for clarity. (2020/02/14).
**Loss Reason Codes:** Code 206 from OpenRTB 2.x was missing and added back to 3.0. Codes 206 to 212 incremented one value to stay consistent with their 2.x version. (2021/04/15).

# Appendix D:  Versioning Policy (付録 D: バージョニングポリシー) <a name="appendixd_versioning"></a>

OpenRTB 3.0 以降、OpenRTB のバージョン番号は、互換性を損なう変更 (breaking changes) があった場合にのみ増分されます。言い換えると、バージョンを区別する必要がある場合、OpenRTB 3.1 は OpenRTB 3.0 とは異なるバージョンと見なされるべきです。たとえば、デマンドソースは、サプライソースから受信したビッドリクエストを解析するときに [バージョンヘッダー](#versionheaders) を考慮する場合があります。[OpenRTB Principles (OpenRTB の原則)](#openrtb_principles) を参照してください。

OpenRTB 仕様の現在のバージョンは、新しいフィールド、オブジェクト、または列挙リストの値など、互換性を損なわない改善がリリースされる場合、約 1 か月に 1 回更新されます。仕様自体に実質的な影響を与えない説明の明確化や修正などの正誤表も、毎月の更新中に対処されます。[Errata (正誤表)](#appendixc_errata) を参照してください。

リリースブランチは毎月のリリースごとに作成され、それらの履歴は GitHub で確認できます。リポジトリの master ブランチは常に最新のリリースを反映しますが、進行中の開発作業は 'develop' ブランチで行われます。

このバージョニングポリシーは、OpenRTB の歴史的な慣行からの逸脱です。OpenRTB 3.0 より前のバージョンでは、メジャーバージョン番号は互換性を損なう変更を表し、マイナーバージョン番号は互換性を損なわない変更を表していました。
